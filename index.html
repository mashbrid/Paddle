<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Paddle Controller</title>
  <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 10px;
        }
        .main-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #connect-btn {
            margin-bottom: 20px;
        }
        .columns {
            display: flex;
            justify-content: center;
            gap: 40px; /* Space between the two columns */
        }
        .column {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .button-group {
            display: flex;
            flex-wrap: wrap; /* Allow buttons to wrap if needed */
            justify-content: center; /* Center the buttons */
            gap: 10px; /* Space between buttons */
            margin-top: 10px; /* Optional margin for spacing */
        }
        button {
            min-width: 150px; /* Ensure consistent button size */
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
            text-align: center; /* Prevent text wrapping */
            white-space: nowrap; /* Prevent text wrapping */
            margin-bottom: 3px; /* Space between buttons */
        }
        button:hover {
            background-color: #0056b3;
        }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        .adjust-button {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 5px 10px;
            width: 150px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .adjust-button:hover {
            background-color: #0056b3;
        }
        .adjust-button span {
            flex: 1;
            text-align: center;
        }
        .adjust-button .minus, .adjust-button .plus {
            font-weight: bold;
            padding: 0 5px;
            cursor: pointer;
        }
        .value-display {
            font-size: 14px;
            color: #333;
        }
  </style>
</head>
<body>
  <div class="main-container">
    <h1>Paddle Controller</h1><button id="connect-btn">Connect</button>
    <div class="columns">
      <div class="column">
        <button id="fsr-btn" disabled>Grip Unk</button>
        <div id="fsr-value" class="value-display">
          FSR: -- Step: --
        </div><button class="adjust-button" id="step1-btn"><span class="minus" onclick="adjustStep('step1', -10)">-</span> <span>Step 1: <span id="step1-value">0</span></span> <span class="plus" onclick="adjustStep('step1', 10)">+</span></button> <button class="adjust-button" id="step2-btn"><span class="minus" onclick="adjustStep('step2', -10)">-</span> <span>Step 2: <span id="step2-value">0</span></span> <span class="plus" onclick="adjustStep('step2', 10)">+</span></button> <button class="adjust-button" id="step3-btn"><span class="minus" onclick="adjustStep('step3', -10)">-</span> <span>Step 3: <span id="step3-value">0</span></span> <span class="plus" onclick="adjustStep('step3', 10)">+</span></button> <button class="adjust-button" id="step4-btn"><span class="minus" onclick="adjustStep('step4', -10)">-</span> <span>Step 4: <span id="step4-value">0</span></span> <span class="plus" onclick="adjustStep('step4', 10)">+</span></button> <button class="adjust-button" id="step5-btn"><span class="minus" onclick="adjustStep('step5', -10)">-</span> <span>Step 5: <span id="step5-value">0</span></span> <span class="plus" onclick="adjustStep('step5', 10)">+</span></button> <button class="adjust-button" id="step6-btn"><span class="minus" onclick="adjustStep('step6', -10)">-</span> <span>Step 6: <span id="step6-value">0</span></span> <span class="plus" onclick="adjustStep('step6', 10)">+</span></button> <button class="adjust-button" id="step7-btn"><span class="minus" onclick="adjustStep('step7', -10)">-</span> <span>Step 7: <span id="step7-value">0</span></span> <span class="plus" onclick="adjustStep('step7', 10)">+</span></button> <button class="adjust-button" id="step8-btn"><span class="minus" onclick="adjustStep('step8', -10)">-</span> <span>Step 8: <span id="step8-value">0</span></span> <span class="plus" onclick="adjustStep('step8', 10)">+</span></button> <button class="adjust-button" id="step9-btn"><span class="minus" onclick="adjustStep('step9', -10)">-</span> <span>Step 9: <span id="step9-value">0</span></span> <span class="plus" onclick="adjustStep('step9', 10)">+</span></button> <button class="adjust-button" id="step10-btn"><span class="minus" onclick="adjustStep('step10', -10)">-</span> <span>Step 10: <span id="step10-value">0</span></span> <span class="plus" onclick="adjustStep('step10', 10)">+</span></button>
      </div>
      <div class="column">
        <button id="xangle-btn" disabled>X Angle Unk</button>
        <div id="xangle-value" class="value-display">
          X Angle: --
        </div><button class="adjust-button" id="xangle-adjust-btn"><span class="minus" onclick="adjustXAngle(-0.5)">-</span> <span>X Angle: <span id="xangle-adjust-value">-3.0</span></span> <span class="plus" onclick="adjustXAngle(0.5)">+</span></button> <button class="adjust-button" id="xhaptic-btn"><span class="minus" onclick="adjustXHaptic(-10)">-</span> <span>X Haptic: <span id="xhaptic-value">50</span>%</span> <span class="plus" onclick="adjustXHaptic(10)">+</span></button>
      </div>
    </div>
  </div>
  <script>
        let device;
        let server;
        let uartService;
        let txCharacteristic;
        let rxCharacteristic;
        let isConnected = false;
        let xAngleThreshold = -3.0; // Default X Angle threshold value
        let xHapticIntensity = 50; // Default X Haptic intensity value

        const steps = {
            step1: 0,
            step2: 0,
            step3: 0,
            step4: 0,
            step5: 0,
            step6: 0,
            step7: 0,
            step8: 0,
            step9: 0,
            step10: 0
        };

        // Adjust step value function
        function adjustStep(step, increment) {
            const min = 0;
            const max = 100;

            steps[step] = Math.min(max, Math.max(min, steps[step] + increment));
            document.getElementById(`${step}-value`).textContent = steps[step];
        }

        // Function to adjust X Angle
        function adjustXAngle(change) {
            const minXAngle = -9; // Lower limit for X Angle
            const maxXAngle = 9;  // Upper limit for X Angle
            xAngleThreshold = Math.min(maxXAngle, Math.max(minXAngle, xAngleThreshold + change)); // Constrain the value
            document.getElementById("xangle-adjust-value").textContent = xAngleThreshold.toFixed(1); // Update display with one decimal
        }

        // Function to adjust X Haptic Intensity
        function adjustXHaptic(change) {
            xHapticIntensity = Math.min(100, Math.max(0, xHapticIntensity + change));
            document.getElementById("xhaptic-value").textContent = xHapticIntensity;
        }
  </script>
</body>
</html>
